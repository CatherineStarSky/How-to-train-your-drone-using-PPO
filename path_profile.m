% Barrel roll
r = 1.5;
roll_num = 3;
pre = 10;
gamma = 20000;
theta = linspace(-pi/2,roll_num*2*pi-pi/2,roll_num*6);
x = r.*cos(theta);
y = linspace(pre,r*pre,length(theta));
z = r.*sin(theta)+r;
PATH1 = [x',y',z';5,y(end)+1,0];
PATH1 = PATH1+[5,-9,0];
PATH = [zeros(1,3);PATH1];
Tau_vec = desired_trajectory(PATH, gamma)';

%%
Tau_vec =[1.7620,...
    0.3813,...
    0.5230,...
    0.4789,...
    0.5064,...
    0.4919,...
    0.5001,...
    0.4942,...
    0.4958,...
    0.4977,...
    0.4944,...
    0.5006,...
    0.4962,...
    0.5171,...
    0.5042,...
    0.5850,...
    0.5721,...
    0.6761,...
    1.8935]';
Tau_vec(2:end-1) = .5;
Tau_vec(1) = 1.75;
Tau_vec(end) = 1.75;
traj = MinimumSnapTrajectory(Tau_vec, PATH);
P = traj.P;

t_ref = 0.01:0.1:sum(Tau_vec)*0.999;
pos_ref = getPos(Tau_vec, t_ref', P);
figure(1)
plot3(pos_ref(:,1),pos_ref(:,2),pos_ref(:,3),'.')
grid on
axis equal